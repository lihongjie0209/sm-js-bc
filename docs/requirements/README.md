# 功能需求文档索引

本目录包含 sm-js-bc 项目的功能需求文档，用于规划与 Bouncy Castle Java (bc-java) 对比后需要实现的功能模块。

## 📋 需求文档列表

### 🔐 密码学算法扩展

| 编号 | 文档 | 算法/功能 | 优先级 | 预估工期 | 状态 |
|------|------|-----------|--------|---------|------|
| 01 | [HMAC-SM3 实现](./01-hmac-sm3.md) | HMAC-SM3 消息认证码 | 高 | 2.5-3.5天 | ✅ 已完成 |
| 02 | [SM9 签名算法](./02-sm9-signature.md) | SM9 标识密码签名 | 中 | 14-19天 | ❌ 不实现* |
| 03 | [ZUC 流密码](./03-zuc-stream-cipher.md) | ZUC-128/256 + MAC | 中 | 12-17天 | ✅ 已完成 |

*SM9 未实现原因：Bouncy Castle Java 不支持 SM9。本项目严格保持与 BC Java 的兼容性，只实现 BC Java 支持的算法。

### 🔑 密钥管理与编码

| 编号 | 文档 | 功能 | 优先级 | 预估工期 | 状态 |
|------|------|------|--------|---------|------|
| 04 | [PEM/PKCS#8 支持](./04-pem-pkcs8-support.md) | 密钥格式编码/解码 | 高 | 11-16天 | ✅ 已完成 |
| 05 | [X.509 证书](./05-x509-certificate.md) | 证书解析/生成/验证 | 中高 | 13-18天 | ✅ 已完成 |

### 📊 需求统计

- **总需求数**: 5 个
- **已完成**: 4 个 (80%)
- **不实现**: 1 个 (SM9 - BC Java 不支持)
- **高优先级**: 2 个 (全部完成)
- **中高优先级**: 1 个 (已完成)
- **中优先级**: 2 个 (1 个完成, 1 个不实现)

## 🎯 实施策略

### 阶段 1: 基础增强（优先级：高）✅ 已完成
1. ✅ **HMAC-SM3** (01) - 基础密码学组件，许多协议依赖
2. ✅ **PEM/PKCS#8** (04) - 密钥交换和存储的标准格式

**状态**: 已完成

### 阶段 2: PKI 支持（优先级：中高）✅ 已完成
3. ✅ **X.509 证书** (05) - PKI 基础设施，企业应用必需

**状态**: 已完成

### 阶段 3: 高级算法（优先级：中）✅ 已完成
4. ✅ **ZUC 流密码** (03) - 移动通信加密
5. ❌ **SM9 签名** (02) - 不实现（BC Java 不支持）

**状态**: ZUC 已完成，SM9 因兼容性考虑不实现

## 📝 需求文档编写规范

每个需求文档应包含以下章节：

1. **概述** - 简要说明功能和目标
2. **背景** - 算法/功能的背景知识
3. **功能需求** - 详细的功能描述和 API 设计
4. **技术规范** - 标准文档、参数定义
5. **实现要点** - 关键技术点和注意事项
6. **测试要求** - 单元测试、互操作测试、性能测试
7. **依赖项** - 新增和已有依赖
8. **文件结构** - 代码组织结构
9. **参考资料** - 标准文档和参考实现
10. **优先级** - 实现优先级评估
11. **预估工作量** - 时间估算
12. **验收标准** - 完成标准
13. **相关 Issues** - 关联的 GitHub Issues
14. **后续工作** - 依赖此功能的后续任务

## 🔗 相关文档

- [项目总体规划](../README.md) - 项目文档导航
- [实现计划](../implementation-plan.md) - 已实现功能的实现计划
- [测试策略](../test-strategy.md) - 测试策略和方法
- [API 一致性审计](../API_CONSISTENCY_AUDIT.md) - 与 bc-java 的 API 对比

## 🚀 如何创建新需求

### 1. 选择需求模板

从现有需求文档中选择一个作为模板，保持格式一致。

### 2. 研究参考实现

- 查看 bc-java 的实现（https://github.com/bcgit/bc-java）
- 阅读相关标准文档（RFC、GM/T）
- 了解其他实现（如 OpenSSL、GmSSL）

### 3. 编写需求文档

- 使用清晰的 TypeScript 接口定义
- 提供代码示例和使用场景
- 明确标准和测试向量
- 评估工作量和优先级

### 4. 审核和讨论

- 创建 Pull Request
- 团队审核需求文档
- 讨论技术方案和优先级
- 合并到主分支

### 5. 创建实现 Issue

- 根据需求文档创建 GitHub Issue
- 分配给实现团队或 agent
- 跟踪实现进度

## 📊 与 bc-java 的功能对比

### ✅ 已实现功能

- [x] SM2 椭圆曲线算法（签名、加密、密钥交换）
- [x] SM3 密码杂凑算法
- [x] SM4 分组密码算法（ECB/CBC/CTR/GCM/CFB/OFB）
- [x] **HMAC-SM3** 消息认证码 ✨ 新增
- [x] **ZUC 流密码算法** (ZUC-128/256 + MAC) ✨ 新增
- [x] **PEM/PKCS#8** 密钥格式编码/解码 ✨ 新增
- [x] **X.509 证书** 支持 ✨ 新增
- [x] 椭圆曲线数学库
- [x] 密码学基础设施

### ❌ 不实现功能

- [ ] SM9 标识密码算法 - Bouncy Castle Java 不支持，为保持兼容性不实现

### 🔮 未来规划

- [ ] SM9 加密和密钥交换
- [ ] CRL 和 OCSP 支持
- [ ] TLS/SSL 协议支持
- [ ] 密钥库（Keystore）格式
- [ ] 更多工作模式和填充方案

## 💡 贡献指南

欢迎为需求文档提供建议和改进！

### 如何贡献

1. **提出新需求**
   - 创建 Issue 描述需求
   - 讨论可行性和优先级
   - 编写需求文档

2. **改进现有需求**
   - 提供更详细的技术方案
   - 补充测试用例
   - 更新参考资料

3. **审核需求**
   - 检查技术准确性
   - 验证标准符合性
   - 评估工作量

## 📧 联系方式

如有问题或建议，请：
- 创建 GitHub Issue
- 提交 Pull Request
- 发起 Discussion

---

**最后更新**: 2025-12-07
**维护者**: lihongjie0209
